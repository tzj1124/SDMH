<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lipid-Based Identification Platform for Seed Species in TCM</title>
<!--    <link rel="stylesheet" href="styles.css">-->
    <style type="text/css">
        * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    min-height: 100vh;
    background-color: white;
}

header {
    background-color: rgba(255, 255, 255, 0.9);
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.logo-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    max-width: 1200px;
    margin: 0 auto;
}

.logo {
    width: 50px;
    height: 50px;
}

h1 {
    font-size: 1.8rem;
    color: #333;
}

.navigation {
    display: flex;
    justify-content: stretch;
}

.nav-button {
    flex: 1;
    padding: 1rem;
    font-size: 1.5rem;
    font-family: "Microsoft YaHei", sans-serif;
    background-color: #b71c1c;
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

.nav-button:hover {
    background-color: #d32f2f;
}

.nav-button.active {
    background-color: white;
    color: #b71c1c;
}

main {
    width: 100%;
    margin: 0;
    padding: 0;
}

.content-section {
    display: none;
    width: 100%;
}

.content-section.active {
    display: block;
}

.intro-text {
    background-color: #b71c1c;
    color: white;
    padding: 2rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    text-align: center;
}

.intro-text h2 {
    margin-bottom: 1rem;
    font-size: 2rem;
}

.intro-text p {
    font-size: 1.2rem;
    line-height: 1.8;
}

.steps-image {
    width: 100%;
    height: auto;
    display: block;
    margin-top: 2rem;
    border-radius: 8px;
    background-color: #b71c1c;
}

.steps-image h2 {
    margin-bottom: 2rem;
    font-size: 2rem;
}

.steps {
    max-width: 100%;
    height: auto;
}

.identify-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 0px 4px 5px rgba(0,0,0,0.1);
}

.control-panel {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.input-group {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.input-group label {
    min-width: 100px;
    font-weight: 500;
}

.path-input {
    flex: 1;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
}

.action-button {
    padding: 0.5rem 1rem;
    background-color: #4a90e2;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.action-button:hover {
    background-color: #357abd;
}

#exampleBtn {
    align-self: flex-start;
}

.action-buttons {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
    align-items: center;
}

#cleanDataBtn {
    background-color: #f0ad4e;
}

#cleanDataBtn:hover {
    background-color: #ec971f;
}

.loading-icon {
    width: 20px;
    height: 20px;
}

.hidden {
    display: none;
}

.status-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.result-container {
    margin-top: 2rem;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    min-height: 100px;
}

.result-text {
    font-family: monospace;
    white-space: pre-wrap;
    word-break: break-all;
}

.result-item {
    cursor: pointer;
    color: #4a90e2;
    display: inline;
}

.result-item:hover {
    text-decoration: underline;
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    z-index: 1000;
}

.modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 90%;
    max-height: 90%;
}

.modal-content img {
    max-width: 100%;
    max-height: 80vh;
    object-fit: contain;
}

/* HerbLibrary Styles */
.search-container {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    padding: 1rem;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.search-box {
    flex: 1;
    display: flex;
    gap: 1rem;
}

#searchInput {
    flex: 1;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
}

.category-select {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
    min-width: 150px;
}

.herbs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 2rem;
    padding: 1rem;
}

.herb-card {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    cursor: pointer;
    transition: transform 0.3s ease;
}

.herb-card:hover {
    transform: translateY(-5px);
}

.herb-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.herb-info {
    padding: 1rem;
}

.herb-name {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #333;
}

.herb-category {
    font-size: 0.9rem;
    color: #666;
    background-color: #f0f0f0;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    display: inline-block;
}

/* Modal styles for detailed view */
.detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    z-index: 1000;
    cursor: pointer;
}

.detail-modal img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 90%;
    max-height: 90vh;
    object-fit: contain;
}

#introduction {
    width: 100%;
    background-image: url('../static/images/background.png');
    background-size: cover;
    background-position: center;
    padding: 0;
}

.intro-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

#identification, #herblibrary {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background-color: white;
}

    </style>
</head>
<body>
    <header>
        <div class="logo-title">
            <img src="../static/images/logo.png" alt="TCM Logo" class="logo">
            <h1>Lipid-Based Identification Platform for Seed Species in TCM</h1>
        </div>
    </header>

    <nav class="navigation">
        <button class="nav-button active" onclick="showSection('introduction')">Introduction</button>
        <button class="nav-button" onclick="showSection('identification')">Identification</button>
        <button class="nav-button" onclick="showSection('herblibrary')">HerbLibrary</button>
    </nav>

    <main>
        <section id="introduction" class="content-section active">
            <div class="intro-content">
                <div class="intro-text">
                    <h2>Introduction:</h2>
                    <p>This platform integrates High-Performance Liquid Chromatography with Evaporative Light Scattering Detection (HPLC-ELSD) and deep learning algorithms to analyze and identify lipid components in seed species of Traditional Chinese Medicine (SS-TCM). By compiling lipid profiles from 50 common SS-TCM species, we trained a 1D Convolutional Neural Network (1D-CNN) model to achieve rapid and accurate classification of unknown samples. Users can upload HPLC-ELSD chromatographic data, and the system will automatically process inputs to deliver identification results, accompanied by taxonomic details and reference images. Designed for TCM research, quality control, and education, this platform offers an efficient and intelligent solution for SS-TCM authentication.</p>
                </div>
                <img src="../static/images/steps.png" alt="Operation Steps" class="steps-image">
            </div>
        </section>

        <section id="identification" class="content-section">
            <div class="identify-container">
                <div class="control-panel">
                    <button id="exampleBtn" class="action-button">Example</button>
                    <div class="input-group">
                        <label for="modelPath">Load model:</label>
                        <input type="text" id="modelPath" class="path-input" placeholder="/path/to/model">
                    </div>
                    <div class="input-group">
                        <label for="openFile">Open file:</label>
                        <input type="text" id="openFile" class="path-input" placeholder="/path/to/image">
                    </div>
                    <div class="input-group">
                        <label for="savePath">Save:</label>
                        <input type="text" id="savePath" class="path-input" placeholder="/path/to/save">
                    </div>
                    <div class="action-buttons">
                        <button id="identifyBtn" class="action-button">
                            <span>Identify</span>
                        </button>
                        <img src="../static/images/start.png" alt="status" class="status-icon" id="statusIcon">
                        <button id="cleanDataBtn" class="action-button">Clean Data</button>
                    </div>
                </div>
                <div class="result-container">
                    <div id="resultText" class="result-text"></div>
                </div>
            </div>
        </section>

        <section id="herblibrary" class="content-section">
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search by name...">
                    <button id="searchBtn" class="action-button">Search</button>
                </div>
                <select id="categorySelect" class="category-select">
                    <option value="">All Categories</option>
                    <option value="heat-clearing">Heat-Clearing Herbs</option>
                    <option value="tonic">Tonic Herbs</option>
                    <option value="blood-activating">Blood-Activating Herbs</option>
                </select>
            </div>
            <div class="herbs-grid" id="herbsGrid"></div>
        </section>
    </main>
    <script>
        // 模拟后端返回的数据
const mockResponse = {
    names: [
        { name: 'Lablab Semen Album', imageUrl: '../static/images/result/Lablab Semen Album.JPG' },
        { name: 'Ginkgo Semen', imageUrl: '../static/images/result/Ginkgo Semen.JPG' },
        { name: 'Platycladi Semen', imageUrl: '../static/images/result/Platycladi Semen.JPG' },
        { name: 'Ricini Semen', imageUrl: '../static/images/result/Ricini Semen.JPG' },
        { name: 'Arecae Semen', imageUrl: '../static/images/result/Arecae Semen.JPG' },
        { name: 'Alpiniae Katsumadai Semen', imageUrl: '../static/images/result/Alpiniae Katsumadai Semen.JPG' },
        { name: 'Trichosanthis Semen Tostum', imageUrl: '../static/images/result/Trichosanthis Semen Tostum.JPG' },
        { name: 'Plantaginis Semen', imageUrl: '../static/images/result/Plantaginis Semen.JPG' },
        { name: 'Vignaae Semen', imageUrl: '../static/images/result/Vignaae Semen.JPG' },
        { name: 'Sojae Semen Germinatum', imageUrl: '../static/images/result/Sojae Semen Germinatum.JPG' },
        { name: 'Sojae Semen Praeparatum', imageUrl: '../static/images/result/Sojae Semen Praeparatum.JPG' },
        { name: 'Canavaliae Semen', imageUrl: '../static/images/result/Canavaliae Semen.JPG' },
        { name: 'Torreyiae Semen', imageUrl: '../static/images/result/Torreyiae Semen.JPG' },
        { name: 'Trichosanthis Semen', imageUrl: '../static/images/result/Trichosanthis Semen.JPG' },
        { name: 'Juglandis Semen', imageUrl: '../static/images/result/Juglandis Semen.JPG' },
        { name: 'Sojae Semen Nigrum', imageUrl: '../static/images/result/Sojae Semen Nigrum.JPG' },
        { name: 'Sesami Semen Nigrum', imageUrl: '../static/images/result/Sesami Semen Nigrum.JPG' },
        { name: 'Nigellae Semen', imageUrl: '../static/images/result/Nigellae Semen.JPG' },
        { name: 'Trigonellae Semen', imageUrl: '../static/images/result/Trigonellae Semen.JPG' },
        { name: 'Impatientis Semen', imageUrl: '../static/images/result/Impatientis Semen.JPG' },
        { name: 'Arecae Semen Tostum', imageUrl: '../static/images/result/Arecae Semen Tostum.JPG' },
        { name: 'Sinapis Semen', imageUrl: '../static/images/result/Sinapis Semen.JPG' },
        { name: 'Allii Tuberosii Semen', imageUrl: '../static/images/result/Allii Tuberosii Semen.JPG' },
        { name: 'Citri Reticulatae Semen', imageUrl: '../static/images/result/Citri Reticulatae Semen.JPG' },
        { name: 'Cassiae Semen', imageUrl: '../static/images/result/Cassiae Semen.JPG' },
        { name: 'Entadae Semen', imageUrl: '../static/images/result/Entadae Semen.JPG' },
        { name: 'Armeniaceae Semen Amarum', imageUrl: '../static/images/result/Armeniaceae Semen Amarum.JPG' },
        { name: 'Raphani Semen', imageUrl: '../static/images/result/Raphani Semen.JPG' },
        { name: 'Litchi Semen', imageUrl: '../static/images/result/Litchi Semen.JPG' },
        { name: 'Nelumbinis Semen', imageUrl: '../static/images/result/Nelumbinis Semen.JPG' },
        { name: 'Nelumbinis Plumula', imageUrl: '../static/images/result/Nelumbinis Plumula.JPG' },
        { name: 'Longan Arillus', imageUrl: '../static/images/result/Longan Arillus.JPG' },
        { name: 'Momordicae Semen', imageUrl: '../static/images/result/Momordicae Semen.JPG' },
        { name: 'Oroxyli Semen', imageUrl: '../static/images/result/Oroxyli Semen.JPG' },
        { name: 'Sterculiae Lychnophorae Semen', imageUrl: '../static/images/result/Sterculiae Lychnophorae Semen.JPG' },
        { name: 'Pharbitidis Semen', imageUrl: '../static/images/result/Pharbitidis Semen.JPG' },
        { name: 'Euryaales Semen', imageUrl: '../static/images/result/Euryaales Semen.JPG' },
        { name: 'Celosia Semen', imageUrl: '../static/images/result/Celosia Semen.JPG' },
        { name: 'Abutili Semen', imageUrl: '../static/images/result/Abutili Semen.JPG' },
        { name: 'Myristicae Semen', imageUrl: '../static/images/result/Myristicae Semen.JPG' },
        { name: 'Astragali Complanati Semen', imageUrl: '../static/images/result/Astragali Complanati Semen.JPG' },
        { name: 'Ziziphi Spinosae Semen', imageUrl: '../static/images/result/Ziziphi Spinosae Semen.JPG' },
        { name: 'Aesculi Semen', imageUrl: '../static/images/result/Aesculi Semen.JPG' },
        { name: 'Persicae Semen', imageUrl: '../static/images/result/Persicae Semen.JPG' },
        { name: 'Melo Semen', imageUrl: '../static/images/result/Melo Semen.JPG' },
        { name: 'Descurainiae Semen', imageUrl: '../static/images/result/Descurainiae Semen.JPG' },
        { name: 'Vaccariae Semen', imageUrl: '../static/images/result/Vaccariae Semen.JPG' },
        { name: 'Lini Semen', imageUrl: '../static/images/result/Lini Semen.JPG' },
        { name: 'Coicis Semen', imageUrl: '../static/images/result/Coicis Semen.JPG' },
        { name: 'Pruni Semen', imageUrl: '../static/images/result/Pruni Semen.JPG' }
    ]
};
// 图片map
const identifyImageMap = {
    'Lablab Semen Album': '../static/images/result/Lablab Semen Album.jpg',
    'Ginkgo Semen': '../static/images/result/Ginkgo Semen.jpg',
    'Platycladi Semen': '../static/images/result/Platycladi Semen.jpg',
    'Ricini Semen': '../static/images/result/Ricini Semen.jpg',
    'Arecae Semen': '../static/images/result/Arecae Semen.JPG',
    'Alpiniae Katsumadai Semen': '../static/images/result/Alpiniae Katsumadai Semen.jpg',
    'Trichosanthis Semen Tostum': '../static/images/result/Trichosanthis Semen Tostum.jpg',
    'Plantaginis Semen': '../static/images/result/Plantaginis Semen.jpg',
    'Vignaae Semen': '../static/images/result/Vignaae Semen.jpg',
    'Sojae Semen Germinatum': '../static/images/result/Sojae Semen Germinatum.jpg',
    'Sojae Semen Praeparatum': '../static/images/result/Sojae Semen Praeparatum.jpg',
    'Canavaliae Semen': '../static/images/result/Canavaliae Semen.jpg',
    'Torreyiae Semen': '../static/images/result/Torreyiae Semen.jpg',
    'Trichosanthis Semen': '../static/images/result/Trichosanthis Semen.jpg',
    'Juglandis Semen': '../static/images/result/Juglandis Semen.jpg',
    'Sojae Semen Nigrum': '../static/images/result/Sojae Semen Nigrum.jpg',
    'Sesami Semen Nigrum': '../static/images/result/Sesami Semen Nigrum.jpg',
    'Nigellae Semen': '../static/images/result/Nigellae Semen.jpg',
    'Trigonellae Semen': '../static/images/result/Trigonellae Semen.jpg',
    'Impatientis Semen': '../static/images/result/Impatientis Semen.jpg',
    'Arecae Semen Tostum': '../static/images/result/Arecae Semen Tostum.jpg',
    'Sinapis Semen': '../static/images/result/Sinapis Semen.jpg',
    'Allii Tuberosii Semen': '../static/images/result/Allii Tuberosii Semen.jpg',
    'Citri Reticulatae Semen': '../static/images/result/Citri Reticulatae Semen.jpg',
    'Cassiae Semen': '../static/images/result/Cassiae Semen.jpg',
    'Entadae Semen': '../static/images/result/Entadae Semen.jpg',
    'Armeniaceae Semen Amarum': '../static/images/result/Armeniaceae Semen Amarum.jpg',
    'Raphani Semen': '../static/images/result/Raphani Semen.jpg',
    'Litchi Semen': '../static/images/result/Litchi Semen.jpg',
    'Nelumbinis Semen': '../static/images/result/Nelumbinis Semen.jpg',
    'Nelumbinis Plumula': '../static/images/result/Nelumbinis Plumula.jpg',
    'Longan Arillus': '../static/images/result/Longan Arillus.jpg',
    'Momordicae Semen': '../static/images/result/Momordicae Semen.jpg',
    'Oroxyli Semen': '../static/images/result/Oroxyli Semen.jpg',
    'Sterculiae Lychnophorae Semen': '../static/images/result/Sterculiae Lychnophorae Semen.jpg',
    'Pharbitidis Semen': '../static/images/result/Pharbitidis Semen.jpg',
    'Euryaales Semen': '../static/images/result/Euryaales Semen.jpg',
    'Celosia Semen': '../static/images/result/Celosia Semen.jpg',
    'Abutili Semen': '../static/images/result/Abutili Semen.jpg',
    'Myristicae Semen': '../static/images/result/Myristicae Semen.jpg',
    'Astragali Complanati Semen': '../static/images/result/Astragali Complanati Semen.jpg',
    'Ziziphi Spinosae Semen': '../static/images/result/Ziziphi Spinosae Semen.jpg',
    'Aesculi Semen': '../static/images/result/Aesculi Semen.jpg',
    'Persicae Semen': '../static/images/result/Persicae Semen.jpg',
    'Melo Semen': '../static/images/result/Melo Semen.jpg',
    'Descurainiae Semen': '../static/images/result/Descurainiae Semen.jpg',
    'Vaccariae Semen': '../static/images/result/Vaccariae Semen.jpg',
    'Lini Semen': '../static/images/result/Lini Semen.jpg',
    'Coicis Semen': '../static/images/result/Coicis Semen.jpg',
    'Pruni Semen': '../static/images/result/Pruni Semen.jpg'
};

// 模拟药材库数据
const mockHerbsData = [

    {
        id: 1,
        name: 'Lablab Semen Album',
        commonName: 'White Lablab Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Lablab Semen Album-main.jpg',
        detailImage: '../static/images/herbs/Lablab Semen Album-detail.jpg'
    },
    {
        id: 2,
        name: 'Ginkgo Semen',
        commonName: 'Ginkgo Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Ginkgo Semen-main.jpg',
        detailImage: '../static/images/herbs/Ginkgo Semen-detail.jpg'
    },
    {
        id: 3,
        name: 'Platycladi Semen',
        commonName: 'Platycladus Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Platycladi Semen-main.jpg',
        detailImage: '../static/images/herbs/Platycladi Semen-detail.jpg'
    },
    {
        id: 4,
        name: 'Ricini Semen',
        commonName: 'Castor Bean',
        category: 'Seed',
        mainImage: '../static/images/herbs/Ricini Semen-main.jpg',
        detailImage: '../static/images/herbs/Ricini Semen-detail.jpg'
    },
    {
        id: 5,
        name: 'Arecae Semen',
        commonName: 'Areca Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Arecae Semen-main.jpg',
        detailImage: '../static/images/herbs/Arecae Semen-detail.jpg'
    },
    {
        id: 6,
        name: 'Alpiniae Katsumadai Semen',
        commonName: 'Alpinia Katsumadai Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Alpiniae Katsumadai Semen-main.jpg',
        detailImage: '../static/images/herbs/Alpiniae Katsumadai Semen-detail.jpg'
    },
    {
        id: 7,
        name: 'Trichosanthis Semen Tostum',
        commonName: 'Fried Trichosanthis Seed',
        category: 'Seed Processing',
        mainImage: '../static/images/herbs/Trichosanthis Semen Tostum-main.jpg',
        detailImage: '../static/images/herbs/Trichosanthis Semen Tostum-detail.jpg'
    },
    {
        id: 8,
        name: 'Plantaginis Semen',
        commonName: 'Plantain Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Plantaginis Semen-main.jpg',
        detailImage: '../static/images/herbs/Plantaginis Semen-detail.jpg'
    },
    {
        id: 9,
        name: 'Vignaae Semen',
        commonName: 'Vigna Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Vignaae Semen-main.jpg',
        detailImage: '../static/images/herbs/Vignaae Semen-detail.jpg'
    },
    {
        id: 10,
        name: 'Sojae Semen Germinatum',
        commonName: 'Germinated Soybean Seed',
        category: 'Seed Germination',
        mainImage: '../static/images/herbs/Sojae Semen Germinatum-main.jpg',
        detailImage: '../static/images/herbs/Sojae Semen Germinatum-detail.jpg'
    },
    {
        id: 11,
        name: 'Sojae Semen Praeparatum',
        commonName: 'Processed Soybean Seed',
        category: 'Seed Processing',
        mainImage: '../static/images/herbs/Sojae Semen Praeparatum-main.jpg',
        detailImage: '../static/images/herbs/Sojae Semen Praeparatum-detail.jpg'
    },
    {
        id: 12,
        name: 'Canavaliae Semen',
        commonName: 'Canavalia Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Canavaliae Semen-main.jpg',
        detailImage: '../static/images/herbs/Canavaliae Semen-detail.jpg'
    },
    {
        id: 13,
        name: 'Torreyiae Semen',
        commonName: 'Torreyia Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Torreyiae Semen-main.jpg',
        detailImage: '../static/images/herbs/Torreyiae Semen-detail.jpg'
    },
    {
        id: 14,
        name: 'Trichosanthis Semen',
        commonName: 'Trichosanthis Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Trichosanthis Semen-main.jpg',
        detailImage: '../static/images/herbs/Trichosanthis Semen-detail.jpg'
    },
    {
        id: 15,
        name: 'Juglandis Semen',
        commonName: 'Walnut Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Juglandis Semen-main.jpg',
        detailImage: '../static/images/herbs/Juglandis Semen-detail.jpg'
    },
    {
        id: 16,
        name: 'Sojae Semen Nigrum',
        commonName: 'Black Soybean Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Sojae Semen Nigrum-main.jpg',
        detailImage: '../static/images/herbs/Sojae Semen Nigrum-detail.jpg'
    },
    {
        id: 17,
        name: 'Sesami Semen Nigrum',
        commonName: 'Black Sesame Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Sesami Semen Nigrum-main.jpg',
        detailImage: '../static/images/herbs/Sesami Semen Nigrum-detail.jpg'
    },
    {
        id: 18,
        name: 'Nigellae Semen',
        commonName: 'Black Cumin Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Nigellae Semen-main.jpg',
        detailImage: '../static/images/herbs/Nigellae Semen-detail.jpg'
    },
    {
        id: 19,
        name: 'Trigonellae Semen',
        commonName: 'Fenugreek Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Trigonellae Semen-main.jpg',
        detailImage: '../static/images/herbs/Trigonellae Semen-detail.jpg'
    },
    {
        id: 20,
        name: 'Impatientis Semen',
        commonName: 'Balsam Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Impatientis Semen-main.jpg',
        detailImage: '../static/images/herbs/Impatientis Semen-detail.jpg'
    },
    {
        id: 21,
        name: 'Arecae Semen Tostum',
        commonName: 'Fried Areca Seed',
        category: 'Seed Processing',
        mainImage: '../static/images/herbs/Arecae Semen Tostum-main.jpg',
        detailImage: '../static/images/herbs/Arecae Semen Tostum-detail.jpg'
    },
    {
        id: 22,
        name: 'Sinapis Semen',
        commonName: 'Mustard Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Sinapis Semen-main.jpg',
        detailImage: '../static/images/herbs/Sinapis Semen-detail.jpg'
    },
    {
        id: 23,
        name: 'Allii Tuberosii Semen',
        commonName: 'Garlic Chive Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Allii Tuberosii Semen-main.jpg',
        detailImage: '../static/images/herbs/Allii Tuberosii Semen-detail.jpg'
    },
    {
        id: 24,
        name: 'Citri Reticulatae Semen',
        commonName: 'Mandarin Orange Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Citri Reticulatae Semen-main.jpg',
        detailImage: '../static/images/herbs/Citri Reticulatae Semen-detail.jpg'
    },
    {
        id: 25,
        name: 'Cassiae Semen',
        commonName: 'Cassia Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Cassiae Semen-main.jpg',
        detailImage: '../static/images/herbs/Cassiae Semen-detail.jpg'
    },
    {
        id: 26,
        name: 'Entadae Semen',
        commonName: 'Entada Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Entadae Semen-main.jpg',
        detailImage: '../static/images/herbs/Entadae Semen-detail.jpg'
    },
    {
        id: 27,
        name: 'Armeniaceae Semen Amarum',
        commonName: 'Bitter Armeniaceae Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Armeniaceae Semen Amarum-main.jpg',
        detailImage: '../static/images/herbs/Armeniaceae Semen Amarum-detail.jpg'
    },
    {
        id: 28,
        name: 'Raphani Semen',
        commonName: 'Radish Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Raphani Semen-main.jpg',
        detailImage: '../static/images/herbs/Raphani Semen-detail.jpg'
    },
    {
        id: 29,
        name: 'Litchi Semen',
        commonName: 'Lychee Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Litchi Semen-main.jpg',
        detailImage: '../static/images/herbs/Litchi Semen-detail.jpg'
    },
    {
        id: 30,
        name: 'Nelumbinis Semen',
        commonName: 'Lotus Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Nelumbinis Semen-main.jpg',
        detailImage: '../static/images/herbs/Nelumbinis Semen-detail.jpg'
    },
    {
        id: 31,
        name: 'Nelumbinis Plumula',
        commonName: 'Lotus Plumule',
        category: 'Seed Plumule',
        mainImage: '../static/images/herbs/Nelumbinis Plumula-main.jpg',
        detailImage: '../static/images/herbs/Nelumbinis Plumula-detail.jpg'
    },
    {
        id: 32,
        name: 'Longan Arillus',
        commonName: 'Longan Aril',
        category: 'Seed Aril',
        mainImage: '../static/images/herbs/Longan Arillus-main.jpg',
        detailImage: '../static/images/herbs/Longan Arillus-detail.jpg'
    },
    {
        id: 33,
        name: 'Momordicae Semen',
        commonName: 'Bitter Melon Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Momordicae Semen-main.jpg',
        detailImage: '../static/images/herbs/Momordicae Semen-detail.jpg'
    },
    {
        id: 34,
        name: 'Oroxyli Semen',
        commonName: 'Oroxylum Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Oroxyli Semen-main.jpg',
        detailImage: '../static/images/herbs/Oroxyli Semen-detail.jpg'
    },
    {
        id: 35,
        name: 'Sterculiae Lychnophorae Semen',
        commonName: 'Sterculia Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Sterculiae Lychnophorae Semen-main.jpg',
        detailImage: '../static/images/herbs/Sterculiae Lychnophorae Semen-detail.jpg'
    },
    {
        id: 36,
        name: 'Pharbitidis Semen',
        commonName: 'Morning Glory Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Pharbitidis Semen-main.jpg',
        detailImage: '../static/images/herbs/Pharbitidis Semen-detail.jpg'
    },
    {
        id: 37,
        name: 'Euryaales Semen',
        commonName: 'Euryaales Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Euryaales Semen-main.jpg',
        detailImage: '../static/images/herbs/Euryaales Semen-detail.jpg'
    },
    {
        id: 38,
        name: 'Celosia Semen',
        commonName: 'Cockscomb Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Celosia Semen-main.jpg',
        detailImage: '../static/images/herbs/Celosia Semen-detail.jpg'
    },
    {
        id: 39,
        name: 'Abutili Semen',
        commonName: 'Velvetleaf Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Abutili Semen-main.jpg',
        detailImage: '../static/images/herbs/Abutili Semen-detail.jpg'
    },
    {
        id: 40,
        name: 'Myristicae Semen',
        commonName: 'Nutmeg Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Myristicae Semen-main.jpg',
        detailImage: '../static/images/herbs/Myristicae Semen-detail.jpg'
    },
    {
        id: 41,
        name: 'Astragali Complanati Semen',
        commonName: 'Flat Astragalus Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Astragali Complanati Semen-main.jpg',
        detailImage: '../static/images/herbs/Astragali Complanati Semen-detail.jpg'
    },
    {
        id: 42,
        name: 'Ziziphi Spinosae Semen',
        commonName: 'Jujube Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Ziziphi Spinosae Semen-main.jpg',
        detailImage: '../static/images/herbs/Ziziphi Spinosae Semen-detail.jpg'
    },
    {
        id: 43,
        name: 'Aesculi Semen',
        commonName: 'Aesculus Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Aesculi Semen-main.jpg',
        detailImage: '../static/images/herbs/Aesculi Semen-detail.jpg'
    },
    {
        id: 44,
        name: 'Persicae Semen',
        commonName: 'Peach Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Persicae Semen-main.jpg',
        detailImage: '../static/images/herbs/Persicae Semen-detail.jpg'
    },
    {
        id: 45,
        name: 'Melo Semen',
        commonName: 'Melon Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Melo Semen-main.jpg',
        detailImage: '../static/images/herbs/Melo Semen-detail.jpg'
    },
    {
        id: 46,
        name: 'Descurainiae Semen',
        commonName: 'Descurainia Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Descurainiae Semen-main.jpg',
        detailImage: '../static/images/herbs/Descurainiae Semen-detail.jpg'
    },
    {
        id: 47,
        name: 'Vaccariae Semen',
        commonName: 'Vaccaria Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Vaccariae Semen-main.jpg',
        detailImage: '../static/images/herbs/Vaccariae Semen-detail.jpg'
    },
    {
        id: 48,
        name: 'Lini Semen',
        commonName: 'Flax Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Lini Semen-main.jpg',
        detailImage: '../static/images/herbs/Lini Semen-detail.jpg'
    },
    {
        id: 49,
        name: 'Coicis Semen',
        commonName: 'Job\'s Tears Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Coicis Semen-main.jpg',
        detailImage: '../static/images/herbs/Coicis Semen-detail.jpg'
    },
    {
        id: 50,
        name: 'Pruni Semen',
        commonName: 'Plum Seed',
        category: 'Seed',
        mainImage: '../static/images/herbs/Pruni Semen-main.jpg',
        detailImage: '../static/images/herbs/Pruni Semen-detail.jpg'
    }
];

// 渲染药材卡片
function renderHerbCards(herbs) {
    const herbsGrid = document.getElementById('herbsGrid');
    herbsGrid.innerHTML = herbs.map(herb => `
        <div class="herb-card" data-detail="${herb.detailImage}">
            <img src="${herb.mainImage}" alt="${herb.name}" class="herb-image">
            <div class="herb-info">
                <div class="herb-name">${herb.name}</div>
                <div class="herb-common-name">${herb.commonName}</div>
                <div class="herb-category">${herb.category}</div>
            </div>
        </div>
    `).join('');

    // 添加点击事件
    document.querySelectorAll('.herb-card').forEach(card => {
        card.addEventListener('click', () => {
            const detailModal = document.querySelector('.detail-modal');
            const detailImg = detailModal.querySelector('img');
            detailImg.src = card.dataset.detail;
            detailModal.style.display = 'block';
        });
    });
}

// 搜索功能
async function searchHerbs() {
    // 只有在HerbLibrary页面显示时才执行搜索
    if (!document.getElementById('herblibrary').classList.contains('active')) {
        return;
    }

    const searchInput = document.getElementById('searchInput');
    const categorySelect = document.getElementById('categorySelect');
    const searchTerm = searchInput.value.toLowerCase();
    const category = categorySelect.value;

    let data = '';
    try {
        // 构建请求参数
        const requestData = {
            searchTerm: searchTerm,
            category: category
        };

        console.log('Sending request:', requestData);
        // 模拟API请求
        // try {
        //     const res = await fetch('http://localhost:8090/api/herbs/search', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json'
        //         },
        //         body: JSON.stringify(requestData)
        //     });
        //     mockHerbsData = await res.json();

        // } catch (error) {
        //     console.log('API request failed, using mock data');
        // }

        // 模拟等待时间
        await new Promise(resolve => setTimeout(resolve, 1000));

        // 使用mockHerbsData模拟返回数据
        data = mockHerbsData.filter(herb => {
            const matchesSearch = !searchTerm ||
                herb.name.toLowerCase().includes(searchTerm) ||
                herb.commonName.toLowerCase().includes(searchTerm);
            const matchesCategory = !category ||
                herb.category.toLowerCase() === category.toLowerCase();
            return matchesSearch && matchesCategory;
        });

        console.log('Response data:', data);
        renderHerbCards(data);
    } catch (error) {
        console.error('Error:', error);
        alert('Failed to search herbs');
    }
}

function showSection(sectionId) {
    // 隐藏所有section
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });

    // 移除所有导航按钮的active类
    document.querySelectorAll('.nav-button').forEach(button => {
        button.classList.remove('active');
    });

    // 显示选中的section
    document.getElementById(sectionId).classList.add('active');

    // 给对应的导航按钮添加active类
    document.querySelector(`[onclick="showSection('${sectionId}')"]`).classList.add('active');

    // 如果切换到HerbLibrary页面，触发搜索
    if (sectionId === 'herblibrary') {
        searchHerbs();
    }
}

// 添加模态框到body
const modal = document.createElement('div');
modal.className = 'modal';
modal.innerHTML = '<img class="modal-content">';
document.body.appendChild(modal);

// 关闭模态框
modal.addEventListener('click', () => {
    modal.style.display = 'none';
});

// 创建详情模态框
const detailModal = document.createElement('div');
detailModal.className = 'detail-modal';
detailModal.innerHTML = '<img src="" alt="Herb Detail">';
document.body.appendChild(detailModal);

// 关闭详情模态框
detailModal.addEventListener('click', () => {
    detailModal.style.display = 'none';
});

document.addEventListener('DOMContentLoaded', () => {
    showSection('introduction');

    const modelPath = document.getElementById('modelPath');
    const openFile = document.getElementById('openFile');
    const savePath = document.getElementById('savePath');
    const exampleBtn = document.getElementById('exampleBtn');
    const identifyBtn = document.getElementById('identifyBtn');
    const cleanDataBtn = document.getElementById('cleanDataBtn');
    const resultText = document.getElementById('resultText');
    const statusIcon = document.getElementById('statusIcon');
    const identifyText = identifyBtn.querySelector('span');
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const categorySelect = document.getElementById('categorySelect');

    // 初始化状态图标
    statusIcon.src = '../static/images/start.png';

    // Example按钮点击事件
    exampleBtn.addEventListener('click', () => {
        const downloadLink = document.createElement('a');
        downloadLink.href = '../static/images/example.zip';
        downloadLink.download = 'example.zip';
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
    });

    // Clean Data按钮点击事件
    cleanDataBtn.addEventListener('click', () => {
        modelPath.value = '';
        openFile.value = '';
        savePath.value = '';
        resultText.innerHTML = '';
    });

    // Identify按钮点击事件
    identifyBtn.addEventListener('click', async () => {
        if (!modelPath.value || !openFile.value || !savePath.value) {
            alert('Please fill in all fields');
            return;
        }

        // 切换为运行状态图片
        statusIcon.src = '../static/images/running.png';
        identifyText.textContent = 'Processing...';
        identifyBtn.disabled = true;

        // 构建请求参数
        // const requestData = {
        //     modelPath: modelPath.value,
        //     imagePath: openFile.value,
        //     savePath: savePath.value
        // };
        const requestData = {
            root: modelPath.value,
            data_path: openFile.value,
            result_path: savePath.value
        };

        //发送API请求
        const response = await fetch('http://127.0.0.1:5000/process_csv', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestData)
        });

        // 模拟API响应
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        // 模拟请求定时2秒
        // await new Promise(resolve => setTimeout(resolve, 1000));

        // 这里使用mockResponse模拟返回数据
        // console.log('Response data:', response);
        // const data = mockResponse;
        const data = await response.json();
        console.log(data)
        // 处理结果
        const resultHtml = data.names.map((item, index) => {
            const isLast = index === data.names.length - 1;
            // 要改这里
            return `<span class="result-item" data-image="${identifyImageMap[item]}">'${item}'${isLast ? '' : ', '}</span>`;
        }).join('');

        resultText.innerHTML = resultHtml;

        // 添加点击事件
        document.querySelectorAll('.result-item').forEach(item => {
            item.addEventListener('click', () => {
                const modalImg = modal.querySelector('img');
                modalImg.src = item.dataset.image;
                modal.style.display = 'block';
            });
        });
        try {

        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred during identification');
        } finally {
            // 恢复原始状态
            statusIcon.src = '../static/images/start.png';
            identifyText.textContent = 'Identify';
            identifyBtn.disabled = false;
        }
    });

    // 搜索按钮点击事件
    searchBtn.addEventListener('click', searchHerbs);

    // 输入框回车事件
    searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            searchHerbs();
        }
    });

    // 类别选择改变事件
    categorySelect.addEventListener('change', searchHerbs);

    // 初始加载
    searchHerbs();
});

    </script>
</body>
</html>
